generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "postgres://birhanu@localhost/booksalem_development"
}

model Book {
  id        Int     @default(autoincrement()) @id
  author    String
  title     String
  description   String?
  ISBN      String?
  status    String
  condition   String
  rating    Int?
  user    User?   @relation("user", fields: [userId], references: [id])
  userId  Int?
  owner    User   @relation("owner", fields: [ownerId], references: [id])
  ownerId  Int
  category    Category   @relation(fields: [categoryId], references: [id])
  categoryId  Int
  language    Language   @relation(fields: [languageId], references: [id])
  languageId  Int
  orders    Order[]
}

model User {
  id       Int     @default(autoincrement()) @id
  email    String  @unique
  password String  @default("")
  name     String?
  isAdmin Boolean @default(false)
  books    Book[]
  user  Book[]  @relation("user")
  owner Book[]  @relation("owner")
  orders    Order[]
}

model Category {
  id       Int     @default(autoincrement()) @id
  name     String
}

model Language {
  id       Int     @default(autoincrement()) @id
  name     String
}

model Order {
  id       Int     @default(autoincrement()) @id
  unitPrice   Float
  quantity    Int
  user    User   @relation(fields: [userId], references: [id])
  userId  Int
  book    Book?   @relation(fields: [bookId], references: [id])
  bookId  Int?
}